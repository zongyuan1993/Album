# Album
[![Developing](https://img.shields.io/badge/Album-tested-4CC61E.svg)](https://github.com/772807886/Album)
[![GitHub license](https://img.shields.io/badge/license-AGPL-blue.svg)](https://raw.githubusercontent.com/772807886/Album/master/LICENSE)
[![GitHub stars](https://img.shields.io/github/stars/772807886/Album.svg)](https://github.com/772807886/Album/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/772807886/Album.svg)](https://github.com/772807886/Album/network)
[![GitHub issues](https://img.shields.io/github/issues/772807886/Album.svg)](https://github.com/772807886/Album/issues)

[![IE](https://img.shields.io/badge/IE-11%20Tested%20Unsupport-8AEFFF.svg)](http://windows.microsoft.com/en-us/internet-explorer/browser-ie)
[![safari](https://img.shields.io/badge/Safari-9.1.1%20Tested%20Unsupport-8AEFFF.svg)](https://www.apple.com/safari/)

[![Chrome](https://img.shields.io/badge/Chrome-52.0%20Tested-F19A11.svg?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACYklEQVQ4jZWTv09TURiGTyItFCotrdDWRAdDdBRBEv8ARKjNLaJEVxccTNTFwFT+AjXyo6UFHZwIiVANlNsalhahpuh4dVCJVBLbQu89t+fcaxx4HVpu02hjfJN3O8/zfcN3CKmTh15719iQ/f6Y3zY+LlhHRnuIqd7bmrB55wv6zA065wSNtIGGbaDhViizdigh2yF93OqoCxfDnp903gU6314VROyg4VbQWStoqBlKsAUHMy39f8CFSXeuGPRAjnTUCiobVAVNUIIW7DwhdgOWFyzD+UkP9qdcKIY6oEROQHl+CvT1MArRmzQX6vyRe3oym5/x7Oam3d/yQddOYc7zxRCURMdhccGF3CMXDqbbIS/5wHfj0KQJaFIALLuOgngP+0v9KK4MQBYHIMcHsLhIjhFCCOFxB3jCidxUB/JTp8F3E9A3LkFP9UBLdkNL9YLtrUNN3kApJYC9FcDTfvC031sRtIHH26AuO1BYGIEmTZThVDe0ZBe05HlwKVDeKHMN+vYQ9G0/eNp/tywQbTiqkrgOTQpAS14wYEPwMQB9uyLI+MHSvtsVwXEclYlusO+JX1qq14C15EWUsm+gvb9lTNczAujmlU5CCCF0xfKZi1Zw0Qq21gK22Qe+FweXAuBSACwrgn14UANr73yovcC1ZlRrAYs7wdJXoW54IUfP1qyuZwTwrcHJGoESbbzDYk2othEsZob80gy2cbkyuQyrm4Olv56ysmwaZTEzWMwMtmoCWzVBXTtnrK1nBKhb3q91/8JRaLThE1ttgPqqCWzLe6hnBPC0b19J9Z35J/y/+Q3HrvcalKE85wAAAABJRU5ErkJggg==)](https://www.google.com/chrome/browser/canary.html)
[![Firefox](https://img.shields.io/badge/Firefox-47.0%20Tested-1A6EAF.svg?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAACeElEQVQokW2SW0jTcRTHj0EPhVGBREiWl+3/+5uXXFGOMF3eymtempc5lzMVNUkEQy1nYU2NQovIUpQgXQaSF0KkzG7earo1L5lthvmgoSxZD12Nvj0sDIdf+D6d8zkczvkS2ahGazGrB5Zwsc9qdf8SqgY/o+rpvMy2l4iI6tu6OKXGiMC6CUS1jCOpfQ7J7XMIuz8DRfMkGodmYerx/7MKenOSSWuLCqEqOwtNQwpy79ZB3PQBvk3T8Lw1Dr+KAVxtHcT02AOYdblYAUdk7NG7UzyMKh7G2wzZZdUIre4AX6ODZ8UQREU9SL30BD8sXbDMpOPbnDyZiIgmlQxvs3m8L+ZhrOagyw/DhXOVEJ15DJ+sVogU9+AtbYB+5CaWzWn4Pi9fJCKi0SSGiQyGqQIepioeqtM52JuqgUjeBI+YWggD1Th64gYMryvxy6yGqTPHuq4+jmEsleFlFENpYAR2B5dDGHIFwuDLcBGXYJdPHgJClfi5EIuv85noa8m3gkPhHAxSBm0sgy7TAyXxMShPj0bzeQn8JEo4uSagIO0Ivozvh0XnhMXujN9ERNTrzy1rIzkYEhgMKQzPj7tDE+SFaBYEgVs8djqGob+ew6ceZ5iuCTFbmyVduewzCYfhKA6GRIa2GC8keh8C73gYIe4BaJTtwex1HlMqBk2E1/93EBG1ersV9vpzeBXOQR/PMJrMMKrgMZnFYCqwHk+bwFDquV2yCjxob79Nw7vldYs5vAiyDhg5xqCPYxiOZXgo4eC3dWMkEW2xTZ3dJiKHbAcHyR3etbJDJFjoPCBYbtnn8rFIsKPYecN6XyLavGZebbTun+3WKv4FhfBWgbqZ/oIAAAAASUVORK5CYII=)](https://www.mozilla.org/en-US/firefox/new/)
[![Edge](https://img.shields.io/badge/Edge-25.10586%20Tested-0078D7.svg?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAOCAYAAAD0f5bSAAABLUlEQVQokY2SPS9EURCGny1EIhqVQqtQEKVOoyBZlUSxJcVKhMjG3jsnColoaURDIdv6A6ISP2AL1p6ZrIRKCIXEaqgoXPeedX1NMsnJTJ5538wZCKOqw4juI3qJWBuxNs7qiF9j+aibXMS2hLO3H1PsmtXGUAY4P9vRFDtB7BjRZiesz7hGH5TrPUnhkchPEVmJcr0rHSi2/kXxAJzWcHqbWhTbyVl3dhWANxDbFlCg6scSxRqRlXB+ntjPfby1FUBP4bSHXxeR2XtJfDdG/gV8JgCRTWeTdBNpThLbTC5Fi4gWE6XmaAb57fwnfh8FxO4DtV0qfjDtrlz0I34Bp6dUzgbCi5jJ+9cWoorT17S26Hs79cRv/LmEHAQQ+wlEDxG9C472HGd7iI4DhXdDbBiVdgdsqwAAAABJRU5ErkJggg==)](https://www.microsoft.com/en-us/windows/microsoft-edge)

一个使用JS编写的相册库，使用了ES2015+CSS3

[Demo](http://772807886.github.io/Album/demo.html)

### 写在前面
这个类库的开始就是以ES6+CSS3为基础的，不对旧版本浏览器进行兼容，在新版本的Chrome和Firefox均可以直接使用。

如果需要对旧版浏览器进行兼容，可以自行使用[Babel](https://babeljs.io/repl/)转换为ES5后使用。

**注：Edge测试暂时不支持拼图布局模式的两张布局模式。**

## Usage 使用方法
1. 包含album.min.css（或是未压缩版：album.css）和album.min.js（或是未压缩版：album.js）。
```html
<link rel="stylesheet" href="./css/album.min.css" />
<script src="./js/album.js"></script>
```
2. 定义一个div容器，并指定id、宽度和高度（拼图布局必须指定高度，其他布局不需要）。
```html
<div id="album" style="width: 100%; height: 100%;"></div>
```
3. 使用div容器的id构造Album对象。
```javascript
let obj = Album("album");
```
4. 调用初始化函数初始化类库，并传入初始化参数。
```javascript
obj.setImage("", {
    layout: obj.LAYOUT.PUZZLE,
    resizeUpdate: 100
});
```
* 第一个参数为一个字符串或是字符串数组，传入一个或多个图片的地址。
* 第二个参数为一个对象，用于配置类库。

|配置项|说明|可选项|含义|默认值|
|:---:|:---:|:---:|:---:|:---:|
|layout|布局类型|Album.LAYOUT.PUZZLE<br />Album.LAYOUT.WATERFALL<br />Album.LAYOUT.BARREL|拼图布局<br />瀑布布局<br />木桶布局|Album.LAYOUT.WATERFALL|
|fullScreen|点击图片全屏|Album.FULL_SCREEN.NONE<br />Album.FULL_SCREEN.PAGE<br />Album.FULL_SCREEN.WINDOW|禁止全屏<br />页面全屏<br />全屏|Album.FULL_SCREEN.NONE|
|gutter|图片间距|{x: number, y: number}|x：横向间距<br />y：纵向间距|{x: 0, y: 0}|
|waterfallColumn|瀑布布局列数|Number<br />&gt;0<br />Album.WATERFALL_AUTO|瀑布布局列数|4|
|waterfallAutoMinWidth|瀑布布局自动响应列宽|Number<br />&gt;0|最小列宽|200|
|barrelHeight|木桶布局高度范围|{min: number, max: number}|min：最小高度<br />max：最大高度|{min: 250, max: 300}|
|resizeUpdate|容器大小改变监听<br />当容器大小改变时重新计算布局|Number|&lt;=0为不监视|不监视|
|imageLoadCallback|所有图片加载完成回调函数|Function|当队列中的图片加载完成后自动调用的函数|undefined|

5. 调用```obj.addImage([]);```追加图片，函数返回追加的图片对象，可对追加的图片设置其他属性。
例如：
```javascript
//添加1张图片
obj.addImage("./img/example.jpg").setAttribute("title", "example.jpg");
//添加多张图片
obj.addImage(["./img/example1.jpg", "./img/example2.jpg"]).forEach(function(image) {
    image.setAttribute("title", image.src);
});
```
## 关于图片顺序
***注：添加多张图片时，将会把所有图片加入缓冲队列进行加载，加载完成后才会被放入布局队列中进行布局。因此，图片的顺序以加载完成时的顺序为准。***

***如需控制图片顺序，可以使用addImage函数的第二个参数回调，传入一个函数，在图片成功加载时会回调该函数。***

***该函数可以接受1个Boolean参数，true表示图片加载成功，false表示图片加载失败。***

## PUZZLE 拼图布局
拼图布局目前支持1~6张图片，超过6张将只显示前6张。

![一张图片](https://github.com/772807886/Album/raw/master/demo/puzzle/puzzle-1.png)
![两张图片](https://github.com/772807886/Album/raw/master/demo/puzzle/puzzle-2.png)
![三张图片](https://github.com/772807886/Album/raw/master/demo/puzzle/puzzle-3.png)
![四张图片](https://github.com/772807886/Album/raw/master/demo/puzzle/puzzle-4.png)
![五张图片](https://github.com/772807886/Album/raw/master/demo/puzzle/puzzle-5.png)
![六张图片](https://github.com/772807886/Album/raw/master/demo/puzzle/puzzle-6.png)

## WATERFALL 瀑布布局

![瀑布布局](https://github.com/772807886/Album/raw/master/demo/waterfall/waterfall-1.png)

## BARREL 木桶布局
![木桶布局](https://github.com/772807886/Album/raw/master/demo/barrel/barrel-1.png)
